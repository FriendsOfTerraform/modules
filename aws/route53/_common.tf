data "aws_caller_identity" "current" {}
data "aws_region" "current" {}

locals {
  common_tags = {
    managed-by = "Terraform"
  }

  records = {
    for record in var.records :
    # Keys should be name_<TYPE>/<set_identifier>
    # check to see if there is a set_identifier, if so, attach to the record key
    record.set_identifier != null ? "${record.name}_${record.type}/${record.set_identifier}" : "${record.name}_${record.type}" =>
    {
      name                             = record.name
      type                             = record.type
      values                           = record.values
      health_check_id                  = record.health_check_id
      ttl                              = record.ttl
      set_identifier                   = record.set_identifier
      alias                            = record.alias
      failover_routing_policy          = record.failover_routing_policy
      geolocation_routing_policy       = record.geolocation_routing_policy
      geoproximity_routing_policy      = record.geoproximity_routing_policy
      latency_routing_policy           = record.latency_routing_policy
      multivalue_answer_routing_policy = record.multivalue_answer_routing_policy
      weighted_routing_policy          = record.weighted_routing_policy
      health_check                     = record.health_check
    }
  }

  # replace . to - in the domain name so it can be used to prefix other resources if needed
  prefix = replace(var.domain_name, ".", "-")

  continents = {
    "Africa"        = "AF"
    "Antarctica"    = "AN"
    "Asia"          = "AS"
    "Europe"        = "EU"
    "Oceania"       = "OC"
    "North America" = "NA"
    "South America" = "SA"
  }

  countries = {
    "Default"                                      = "*"
    "Andorra"                                      = "AD"
    "United Arab Emirates"                         = "AE"
    "Afghanistan"                                  = "AF"
    "Antigua And Barbuda"                          = "AG"
    "Anguilla"                                     = "AI"
    "Albania"                                      = "AL"
    "Armenia"                                      = "AM"
    "Angola"                                       = "AO"
    "Antarctica"                                   = "AQ"
    "Argentina"                                    = "AR"
    "American Samoa"                               = "AS"
    "Austria"                                      = "AT"
    "Australia"                                    = "AU"
    "Aruba"                                        = "AW"
    "Aland"                                        = "AX"
    "Azerbaijan"                                   = "AZ"
    "Bosnia And Herzegovina"                       = "BA"
    "Barbados"                                     = "BB"
    "Bangladesh"                                   = "BD"
    "Belgium"                                      = "BE"
    "Burkina Faso"                                 = "BF"
    "Bulgaria"                                     = "BG"
    "Bahrain"                                      = "BH"
    "Burundi"                                      = "BI"
    "Benin"                                        = "BJ"
    "Saint Barthelemy"                             = "BL"
    "Bermuda"                                      = "BM"
    "Brunei"                                       = "BN"
    "Bolivia"                                      = "BO"
    "Bonaire"                                      = "BQ"
    "Brazil"                                       = "BR"
    "Bahamas"                                      = "BS"
    "Bhutan"                                       = "BT"
    "Botswana"                                     = "BW"
    "Belarus"                                      = "BY"
    "Belize"                                       = "BZ"
    "Canada"                                       = "CA"
    "Cocos [Keeling] Islands"                      = "CC"
    "Congo"                                        = "CG"
    "Central African Republic"                     = "CF"
    "Republic Of The Congo"                        = "CD"
    "Switzerland"                                  = "CH"
    "Ivory Coast"                                  = "CI"
    "Cook Islands"                                 = "CK"
    "Chile"                                        = "CL"
    "Cameroon"                                     = "CM"
    "China"                                        = "CN"
    "Colombia"                                     = "CO"
    "Costa Rica"                                   = "CR"
    "Cuba"                                         = "CU"
    "Cape Verde"                                   = "CV"
    "Curacao"                                      = "CW"
    "Cyprus"                                       = "CY"
    "Czech Republic"                               = "CZ"
    "Germany"                                      = "DE"
    "Djibouti"                                     = "DJ"
    "Denmark"                                      = "DK"
    "Dominica"                                     = "DM"
    "Dominican Republic"                           = "DO"
    "Algeria"                                      = "DZ"
    "Ecuador"                                      = "EC"
    "Estonia"                                      = "EE"
    "Egypt"                                        = "EG"
    "Eritrea"                                      = "ER"
    "Spain"                                        = "ES"
    "Ethiopia"                                     = "ET"
    "Finland"                                      = "FI"
    "Fiji"                                         = "FJ"
    "Falkland Islands"                             = "FK"
    "Federated States Of Micronesia"               = "FM"
    "Faroe Islands"                                = "FO"
    "France"                                       = "FR"
    "Gabon"                                        = "GA"
    "United Kingdom"                               = "GB"
    "Grenada"                                      = "GD"
    "Georgia"                                      = "GE"
    "French Guiana"                                = "GF"
    "Guernsey"                                     = "GG"
    "Ghana"                                        = "GH"
    "Gibraltar"                                    = "GI"
    "Greenland"                                    = "GL"
    "Gambia"                                       = "GM"
    "Guinea"                                       = "GN"
    "Guadeloupe"                                   = "GP"
    "Equatorial Guinea"                            = "GQ"
    "Greece"                                       = "GR"
    "South Georgia And The South Sandwich Islands" = "GS"
    "Guatemala"                                    = "GT"
    "Guam"                                         = "GU"
    "Guinea-Bissau"                                = "GW"
    "Guyana"                                       = "GY"
    "Hong Kong"                                    = "HK"
    "Honduras"                                     = "HN"
    "Croatia"                                      = "HR"
    "Haiti"                                        = "HT"
    "Hungary"                                      = "HU"
    "Indonesia"                                    = "ID"
    "Ireland"                                      = "IE"
    "Israel"                                       = "IL"
    "Isle Of Man"                                  = "IM"
    "India"                                        = "IN"
    "British Indian Ocean Territory"               = "IO"
    "Iraq"                                         = "IQ"
    "Iran"                                         = "IR"
    "Iceland"                                      = "IS"
    "Italy"                                        = "IT"
    "Jersey"                                       = "JE"
    "Jamaica"                                      = "JM"
    "Hashemite Kingdom Of Jordan"                  = "JO"
    "Japan"                                        = "JP"
    "Kenya"                                        = "KE"
    "Kyrgyzstan"                                   = "KG"
    "Cambodia"                                     = "KH"
    "Kiribati"                                     = "KI"
    "Comoros"                                      = "KM"
    "Saint Kitts And Nevis"                        = "KN"
    "North Korea"                                  = "KP"
    "Republic Of Korea"                            = "KR"
    "Kuwait"                                       = "KW"
    "Cayman Islands"                               = "KY"
    "Kazakhstan"                                   = "KZ"
    "Laos"                                         = "LA"
    "Lebanon"                                      = "LB"
    "Saint Lucia"                                  = "LC"
    "Liechtenstein"                                = "LI"
    "Sri Lanka"                                    = "LK"
    "Liberia"                                      = "LR"
    "Lesotho"                                      = "LS"
    "Lithuania"                                    = "LT"
    "Luxembourg"                                   = "LU"
    "Latvia"                                       = "LV"
    "Libya"                                        = "LY"
    "Morocco"                                      = "MA"
    "Monaco"                                       = "MC"
    "Republic Of Moldova"                          = "MD"
    "Montenegro"                                   = "ME"
    "Saint Martin"                                 = "MF"
    "Madagascar"                                   = "MG"
    "Marshall Islands"                             = "MH"
    "Macedonia"                                    = "MK"
    "Mali"                                         = "ML"
    "Myanmar [Burma]"                              = "MM"
    "Mongolia"                                     = "MN"
    "Macao"                                        = "MO"
    "Northern Mariana Islands"                     = "MP"
    "Martinique"                                   = "MQ"
    "Mauritania"                                   = "MR"
    "Montserrat"                                   = "MS"
    "Malta"                                        = "MT"
    "Mauritius"                                    = "MU"
    "Maldives"                                     = "MV"
    "Malawi"                                       = "MW"
    "Mexico"                                       = "MX"
    "Malaysia"                                     = "MY"
    "Mozambique"                                   = "MZ"
    "Namibia"                                      = "NA"
    "New Caledonia"                                = "NC"
    "Niger"                                        = "NE"
    "Norfolk Island"                               = "NF"
    "Nigeria"                                      = "NG"
    "Nicaragua"                                    = "NI"
    "Netherlands"                                  = "NL"
    "Norway"                                       = "NO"
    "Nepal"                                        = "NP"
    "Nauru"                                        = "NR"
    "Niue"                                         = "NU"
    "New Zealand"                                  = "NZ"
    "Oman"                                         = "OM"
    "Panama"                                       = "PA"
    "Peru"                                         = "PE"
    "French Polynesia"                             = "PF"
    "Papua New Guinea"                             = "PG"
    "Philippines"                                  = "PH"
    "Pakistan"                                     = "PK"
    "Poland"                                       = "PL"
    "Saint Pierre And Miquelon"                    = "PM"
    "Pitcairn Islands"                             = "PN"
    "Puerto Rico"                                  = "PR"
    "Palestine"                                    = "PS"
    "Portugal"                                     = "PT"
    "Palau"                                        = "PW"
    "Paraguay"                                     = "PY"
    "Qatar"                                        = "QA"
    "Reunion"                                      = "RE"
    "Romania"                                      = "RO"
    "Serbia"                                       = "RS"
    "Russian"                                      = "RU"
    "Rwanda"                                       = "RW"
    "Saudi Arabia"                                 = "SA"
    "Solomon Islands"                              = "SB"
    "Seychelles"                                   = "SC"
    "Sudan"                                        = "SD"
    "Sweden"                                       = "SE"
    "Singapore"                                    = "SG"
    "Saint Helena"                                 = "SH"
    "Slovenia"                                     = "SI"
    "Svalbard And Jan Mayen"                       = "SJ"
    "Slovakia"                                     = "SK"
    "Sierra Leone"                                 = "SL"
    "San Marino"                                   = "SM"
    "Senegal"                                      = "SN"
    "Somalia"                                      = "SO"
    "Suriname"                                     = "SR"
    "South Sudan"                                  = "SS"
    "Sao Tome And Principe"                        = "ST"
    "El Salvador"                                  = "SV"
    "Sint Maarten"                                 = "SX"
    "Syria"                                        = "SY"
    "Swaziland"                                    = "SZ"
    "Turks And Caicos Islands"                     = "TC"
    "Chad"                                         = "TD"
    "French Southern Territories"                  = "TF"
    "Togo"                                         = "TG"
    "Thailand"                                     = "TH"
    "Tajikistan"                                   = "TJ"
    "Tokelau"                                      = "TK"
    "East Timor"                                   = "TL"
    "Turkmenistan"                                 = "TM"
    "Tunisia"                                      = "TN"
    "Tonga"                                        = "TO"
    "Turkey"                                       = "TR"
    "Trinidad And Tobago"                          = "TT"
    "Tuvalu"                                       = "TV"
    "Taiwan"                                       = "TW"
    "Tanzania"                                     = "TZ"
    "Ukraine"                                      = "UA"
    "Uganda"                                       = "UG"
    "U.S. Minor Outlying Islands"                  = "UM"
    "United States"                                = "US"
    "Uruguay"                                      = "UY"
    "Uzbekistan"                                   = "UZ"
    "Vatican City"                                 = "VA"
    "Saint Vincent And The Grenadines"             = "VC"
    "Venezuela"                                    = "VE"
    "British Virgin Islands"                       = "VG"
    "U.S. Virgin Islands"                          = "VI"
    "Vietnam"                                      = "VN"
    "Vanuatu"                                      = "VU"
    "Wallis And Futuna"                            = "WF"
    "Samoa"                                        = "WS"
    "Kosovo"                                       = "XK"
    "Yemen"                                        = "YE"
    "Mayotte"                                      = "YT"
    "South Africa"                                 = "ZA"
    "Zambia"                                       = "ZM"
    "Zimbabwe"                                     = "ZW"
  }

  # CountryCode = "US"
  united_states_subdivisions = {
    "Alabama"              = "AL"
    "Alaska"               = "AK"
    "Arizona"              = "AZ"
    "Arkansas"             = "AR"
    "California"           = "CA"
    "Colorado"             = "CO"
    "Connecticut"          = "CT"
    "Delaware"             = "DE"
    "District Of Columbia" = "DC"
    "Florida"              = "FL"
    "Georgia"              = "GA"
    "Hawaii"               = "HI"
    "Idaho"                = "ID"
    "Illinois"             = "IL"
    "Indiana"              = "IN"
    "Iowa"                 = "IA"
    "Kansas"               = "KS"
    "Kentucky"             = "KY"
    "Louisiana"            = "LA"
    "Maine"                = "ME"
    "Maryland"             = "MD"
    "Massachusetts"        = "MA"
    "Michigan"             = "MI"
    "Minnesota"            = "MN"
    "Mississippi"          = "MS"
    "Missouri"             = "MO"
    "Montana"              = "MT"
    "Nebraska"             = "NE"
    "Nevada"               = "NV"
    "New Hampshire"        = "NH"
    "New Jersey"           = "NJ"
    "New Mexico"           = "NM"
    "New York"             = "NY"
    "North Carolina"       = "NC"
    "North Dakota"         = "ND"
    "Ohio"                 = "OH"
    "Oklahoma"             = "OK"
    "Oregon"               = "OR"
    "Pennsylvania"         = "PA"
    "Rhode Island"         = "RI"
    "South Carolina"       = "SC"
    "South Dakota"         = "SD"
    "Tennessee"            = "TN"
    "Texas"                = "TX"
    "Utah"                 = "UT"
    "Vermont"              = "VT"
    "Virginia"             = "VA"
    "Washington"           = "WA"
    "West Virginia"        = "WV"
    "Wisconsin"            = "WI"
    "Wyoming"              = "WY"
  }

  # CountryCode = "UA"
  ukraine_subdivisions = {
    "Vinnytska Oblast"        = "05"
    "Volynska Oblast"         = "07"
    "Luhanska Oblast"         = "09"
    "Crimea"                  = "43"
    "Dnipropetrovska Oblast"  = "12"
    "Donetska Oblast"         = "14"
    "Zhytomyrska Oblast"      = "18"
    "Sevastopol"              = "40"
    "Zakarpatska Oblast"      = "21"
    "Zaporizka Oblast"        = "23"
    "Ivano-Frankivska Oblast" = "26"
    "Kyiv"                    = "30"
    "Kyivska Oblast"          = "32"
    "Kirovohradska Oblast"    = "35"
    "Lvivska Oblast"          = "46"
    "Mykolaivska Oblast"      = "48"
    "Odeska Oblast"           = "51"
    "Poltavska Oblast"        = "53"
    "Rivnenska Oblast"        = "56"
    "Sumska Oblast"           = "59"
    "Ternopilska Oblast"      = "61"
    "Kharkivska Oblast"       = "63"
    "Khersonska Oblast"       = "65"
    "Khmelnytska Oblast"      = "68"
    "Cherkaska Oblast"        = "71"
    "Chernihivska Oblast"     = "74"
    "Chernivetska Oblast"     = "77"
  }
}
